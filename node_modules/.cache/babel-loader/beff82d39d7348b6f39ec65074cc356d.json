{"ast":null,"code":"let productState = {\n  products: [],\n  listOfProducts: []\n};\n\nconst ProductReducer = (state = productState, action) => {\n  let {\n    type,\n    payload\n  } = action;\n\n  switch (type) {\n    case \"GET\":\n      state.listOfProducts = [];\n      let stateProducts = state.products;\n      stateProducts.forEach(prod => {\n        if (prod.category === payload.categoryNormalizedName) {\n          state.listOfProducts.push(prod);\n        }\n      });\n      return { ...state\n      };\n\n    case \"addToMyCart\":\n      let newList = state.listOfProducts.map(product => {\n        if (payload.name === product.name) {\n          if (payload.quantity > 0) {\n            product.quantity--;\n          }\n        }\n\n        return product;\n      });\n      return { ...state,\n        listOfProducts: newList\n      };\n\n    case \"RemoveItem\":\n      let updateInventory = state.listOfProducts.map(product => {\n        if (payload.name === product.name) {\n          product.quantity = product.quantity + product.count;\n        }\n\n        return product;\n      });\n      return { ...state,\n        listOfProducts: updateInventory\n      };\n    // return {\n    //   products: state.products,\n    //   listOfProducts: state.listOfProducts\n    // };\n\n    default:\n      return state;\n  }\n};\n\n_c = ProductReducer;\nexport const addToMyCart = payload => {\n  return {\n    type: \"addToMyCart\",\n    payload: payload\n  };\n};\nexport default ProductReducer; // let initialProductState = {\n//   products: [],\n//   productsList: [],\n// };\n// const ProductReducer = (state = initialProductState, action) => {\n//   let { type, payload } = action;\n//   switch (type) {\n//     case \"GET\":\n//       return {\n//         products: payload,\n//         productsList: [],\n//       };\n//     case \"PUT\":\n//       let newList = state.productsList.map((product) => {\n//         if (payload._id === product._id) {\n//           product.inventoryCount--;\n//           product.cartCount++;\n//         }\n//         return product;\n//       });\n//       return { ...state, productsList: newList };\n//     case \"ACTIVE\":\n//       state.productsList = [];\n//       state.products.forEach((product) => {\n//         if (product.category === payload) {\n//           state.productsList.push(product);\n//         }\n//       });\n//       return { ...state };\n//     case \"PUT_REMOVE\":\n//       let updateInventory = state.productsList.map((product) => {\n//         if (payload._id === product._id) {\n//           product.inventoryCount = product.cartCount + product.inventoryCount;\n//           product.cartCount = 0;\n//         }\n//         return product;\n//       });\n//       return { ...state, productsList: updateInventory };\n//     default:\n//       return state;\n//   }\n// };\n// export default ProductReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductReducer\");","map":{"version":3,"sources":["/home/wafaa/storefront/src/store/ProductsStore.js"],"names":["productState","products","listOfProducts","ProductReducer","state","action","type","payload","stateProducts","forEach","prod","category","categoryNormalizedName","push","newList","map","product","name","quantity","updateInventory","count","addToMyCart"],"mappings":"AAAA,IAAIA,YAAY,GAAG;AACjBC,EAAAA,QAAQ,EAAE,EADO;AAEjBC,EAAAA,cAAc,EAAE;AAFC,CAAnB;;AAKA,MAAMC,cAAc,GAAG,CAACC,KAAK,GAAGJ,YAAT,EAAuBK,MAAvB,KAAkC;AACvD,MAAI;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAoBF,MAAxB;;AACA,UAAQC,IAAR;AACE,SAAK,KAAL;AACEF,MAAAA,KAAK,CAACF,cAAN,GAAuB,EAAvB;AACA,UAAIM,aAAa,GAAGJ,KAAK,CAACH,QAA1B;AACAO,MAAAA,aAAa,CAACC,OAAd,CAAuBC,IAAD,IAAU;AAC9B,YAAIA,IAAI,CAACC,QAAL,KAAkBJ,OAAO,CAACK,sBAA9B,EAAsD;AACpDR,UAAAA,KAAK,CAACF,cAAN,CAAqBW,IAArB,CAA0BH,IAA1B;AACD;AACF,OAJD;AAKA,aAAO,EAAE,GAAGN;AAAL,OAAP;;AAGF,SAAK,aAAL;AACE,UAAIU,OAAO,GAAGV,KAAK,CAACF,cAAN,CAAqBa,GAArB,CAA0BC,OAAD,IAAa;AAClD,YAAIT,OAAO,CAACU,IAAR,KAAiBD,OAAO,CAACC,IAA7B,EAAmC;AACjC,cAAIV,OAAO,CAACW,QAAR,GAAmB,CAAvB,EAA0B;AACxBF,YAAAA,OAAO,CAACE,QAAR;AACD;AACF;;AACD,eAAOF,OAAP;AACD,OAPa,CAAd;AASA,aAAO,EAAE,GAAGZ,KAAL;AAAYF,QAAAA,cAAc,EAAEY;AAA5B,OAAP;;AAGF,SAAK,YAAL;AACE,UAAIK,eAAe,GAAGf,KAAK,CAACF,cAAN,CAAqBa,GAArB,CAA0BC,OAAD,IAAa;AAC1D,YAAIT,OAAO,CAACU,IAAR,KAAiBD,OAAO,CAACC,IAA7B,EAAmC;AACjCD,UAAAA,OAAO,CAACE,QAAR,GAAmBF,OAAO,CAACE,QAAR,GAAmBF,OAAO,CAACI,KAA9C;AACD;;AACD,eAAOJ,OAAP;AACD,OALqB,CAAtB;AAOA,aAAO,EAAE,GAAGZ,KAAL;AAAYF,QAAAA,cAAc,EAAEiB;AAA5B,OAAP;AAGF;AACA;AACA;AACA;;AAEA;AACE,aAAOf,KAAP;AA1CJ;AA4CD,CA9CD;;KAAMD,c;AAgDN,OAAO,MAAMkB,WAAW,GAAId,OAAD,IAAa;AACtC,SAAO;AACLD,IAAAA,IAAI,EAAE,aADD;AAELC,IAAAA,OAAO,EAAEA;AAFJ,GAAP;AAID,CALM;AAOP,eAAeJ,cAAf,C,CAGA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA","sourcesContent":["let productState = {\n  products: [],\n  listOfProducts: [],\n};\n\nconst ProductReducer = (state = productState, action) => {\n  let { type, payload } = action;\n  switch (type) {\n    case \"GET\":\n      state.listOfProducts = [];\n      let stateProducts = state.products\n      stateProducts.forEach((prod) => {\n        if (prod.category === payload.categoryNormalizedName) {\n          state.listOfProducts.push(prod);\n        }\n      });\n      return { ...state };\n\n\n    case \"addToMyCart\":\n      let newList = state.listOfProducts.map((product) => {\n        if (payload.name === product.name) {\n          if (payload.quantity > 0) {\n            product.quantity--;\n          }\n        }\n        return product;\n      });\n\n      return { ...state, listOfProducts: newList };\n\n\n    case \"RemoveItem\":\n      let updateInventory = state.listOfProducts.map((product) => {\n        if (payload.name === product.name) {\n          product.quantity = product.quantity + product.count;\n        }\n        return product;\n      });\n\n      return { ...state, listOfProducts: updateInventory };\n\n\n    // return {\n    //   products: state.products,\n    //   listOfProducts: state.listOfProducts\n    // };\n\n    default:\n      return state;\n  }\n};\n\nexport const addToMyCart = (payload) => {\n  return {\n    type: \"addToMyCart\",\n    payload: payload,\n  };\n};\n\nexport default ProductReducer;\n\n\n// let initialProductState = {\n//   products: [],\n//   productsList: [],\n// };\n\n// const ProductReducer = (state = initialProductState, action) => {\n//   let { type, payload } = action;\n\n//   switch (type) {\n//     case \"GET\":\n//       return {\n//         products: payload,\n//         productsList: [],\n//       };\n\n//     case \"PUT\":\n//       let newList = state.productsList.map((product) => {\n//         if (payload._id === product._id) {\n//           product.inventoryCount--;\n//           product.cartCount++;\n//         }\n//         return product;\n//       });\n\n//       return { ...state, productsList: newList };\n\n//     case \"ACTIVE\":\n//       state.productsList = [];\n//       state.products.forEach((product) => {\n//         if (product.category === payload) {\n//           state.productsList.push(product);\n//         }\n//       });\n//       return { ...state };\n\n//     case \"PUT_REMOVE\":\n//       let updateInventory = state.productsList.map((product) => {\n//         if (payload._id === product._id) {\n//           product.inventoryCount = product.cartCount + product.inventoryCount;\n//           product.cartCount = 0;\n//         }\n//         return product;\n//       });\n//       return { ...state, productsList: updateInventory };\n\n//     default:\n//       return state;\n//   }\n// };\n\n// export default ProductReducer;\n"]},"metadata":{},"sourceType":"module"}